<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OCB Stays - Food Menu</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .menu-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem;
      border-bottom: 1px solid #dee2e6;
    }
    .menu-item-name {
      font-weight: 500;
    }
  </style>
</head>
<body class="bg-light">
  <div class="container py-5">
    <h1 class="mb-4 text-center">üçΩÔ∏è OCB Stays ‚Äì Food Menu</h1>
    <p class="mb-3 text-center text-muted">Please select your food items. Orders will be sent to the kitchen.</p>

    <div class="mb-4">
      <label for="roomDisplay" class="form-label">Room:</label>
      <input type="text" id="roomDisplay" class="form-control" disabled>
    </div>

    <div id="menuContainer"></div>

    <div class="mb-3">
      <label for="instructions" class="form-label">Special Instructions:</label>
      <textarea id="instructions" rows="3" class="form-control"></textarea>
    </div>

    <button id="placeOrder" class="btn btn-primary">Place Order</button>
    <div id="confirmation" class="mt-3 text-success fw-bold d-none">Order placed successfully!</div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const room = params.get('room') || '';
    document.getElementById('roomDisplay').value = room;

    const menuContainer = document.getElementById('menuContainer');
    const selectedItems = [];

    function renderMenu(menuData) {
      menuContainer.innerHTML = '';
      menuData.forEach(item => {
        const div = document.createElement('div');
        div.className = 'menu-item';
        div.innerHTML = `
          <span class="menu-item-name">${item.name} ‚Äì ‚Çπ${item.price}</span>
          <button class="btn btn-sm btn-outline-primary" onclick="addItem('${item.name}', ${item.price})">Add</button>
        `;
        menuContainer.appendChild(div);
      });
    }

    function addItem(name, price) {
      selectedItems.push({ name, price });
      alert(`${name} added to order.`);
    }

    document.getElementById('placeOrder').addEventListener('click', () => {
      const instructions = document.getElementById('instructions').value;
      const order = {
        room,
        items: selectedItems,
        instructions,
        timestamp: new Date().toLocaleString()
      };
      console.log('Order:', order);
      document.getElementById('confirmation').classList.remove('d-none');

      // TODO: send order to Google Sheets via Apps Script
    });

    // === SIMULATION: Load menu from Google Sheets === //
    // Replace this with Google Sheets fetch code later
    const sampleMenu = [
      { name: "Aloo Paratha", price: 60 },
      { name: "Maggi", price: 50 },
      { name: "Bread Omelette", price: 70 },
      { name: "Pasta", price: 150 }
    ];
    renderMenu(sampleMenu);
  </script>
</body>
</html>
